use project;

create table CareProvider(
  NameFirst varchar(15) not null,
  NameLast varchar(20) not null,
  StaffID varchar(10) not null,
  Level varchar(3) not null,
  UserName varchar(20) not null,
  Pass VARCHAR(13) null,
  Salt BLOB(10) NULL,

  primary key(StaffID),
  UNIQUE (UserName)
);

create table Supervisor(
  SID varchar(10) not null,
  SupID varchar(10) not null,

  primary key(SID,SupID),
  constraint `CareProviderIDfk_1`
  foreign key (SID)
  references CareProvider(StaffID)
    on delete cascade on update cascade
);

create table Patient(
  NameFirst varchar(15) not null,
  NameLast varchar(20) not null,
  PatientID varchar(10) not null,
  CPID varchar(10) not null,
  DOB date,
  UserName varchar(20) not null,
  Pass VARCHAR(13) null,
  Salt BLOB(10) NULL,

  primary key(PatientID),
  constraint `PatientCareProviderFK_1`
  foreign key (CPID)
  references CareProvider(StaffID),
  UNIQUE (UserName)
);

create table FingerSeparationExercise(
  PID varchar(10) not null,
  DOE DATETIME not null,
  Repetition int not null,
  Sequence int not null,
  FingerGap VARCHAR(6) not NULL ,
  Minimum DECIMAL(4,2) not NULL,
  Mean DECIMAL(4,2) not NULL,
  Median DECIMAL(4,2) not NULL,
  Maximum DECIMAL(4,2) not NULL,

  primary key(PID, DOE,Repetition,Sequence,FingerGap),

  constraint `PatientFingerSeparationFK_1`
  foreign key (PID)
  references Patient(PatientID)
);

create table Targets(
  PID varchar(10) not null,
  Exercise varchar(10) not null,
  Location  varchar(8) not null,
  Target DECIMAL(4,2) not NULL,

  primary key(PID, Exercise, Location),

  constraint `PatientTargetsFK_1`
  foreign key (PID)
  references Patient(PatientID)
);